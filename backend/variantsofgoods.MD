# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤

## –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç:

### 1. –ú–æ–¥–µ–ª–∏
- ‚úÖ `backend/apps/products/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã Size, ProductVariant
- ‚úÖ `backend/apps/cart/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ variant

### 2. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
- ‚úÖ `backend/apps/products/serializers.py` - API –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- ‚úÖ `backend/apps/cart/serializers.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ

### 3. –ê–¥–º–∏–Ω–∫–∞
- ‚úÖ `backend/apps/products/admin.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

### 4. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úÖ `backend/apps/products/management/commands/load_sizes.py`

## –ó–∞–ø—É—Å–∫ (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations products cart

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å
python manage.py migrate

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã
python manage.py load_sizes
```

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏.

---

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ (–ê–¥–º–∏–Ω–∫–∞)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Django Admin (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8000/admin/products/product/add/

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
   ```
   –ù–∞–∑–≤–∞–Ω–∏–µ: –ì–∏–¥—Ä–æ–∫–æ—Å—Ç—é–º Cressi 5–º–º
   –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ì–∏–¥—Ä–æ–∫–æ—Å—Ç—é–º—ã
   –¶–µ–Ω–∞: 15000‚ÇΩ
   ‚úÖ –ò–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã: –î–ê
   ```

3. **–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑** –¥–æ —Ä–∞–∑–¥–µ–ª–∞ "–í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤"

4. –î–æ–±–∞–≤—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã (–Ω–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë"):
   ```
   –†–∞–∑–º–µ—Ä: S    | Stock: 5  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: M    | Stock: 10 | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: L    | Stock: 3  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: XL   | Stock: 7  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   ```

5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** - –≥–æ—Ç–æ–≤–æ!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Python shell

```python
python manage.py shell

from apps.stores.models import Store
from apps.products.models import Product, Category, Size, ProductVariant
from decimal import Decimal

# –ü–æ–ª—É—á–∞–µ–º –º–∞–≥–∞–∑–∏–Ω –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
store = Store.objects.first()
category = Category.objects.get(slug='gidrokostyumy')

# –°–æ–∑–¥–∞—ë–º —Ç–æ–≤–∞—Ä
product = Product.objects.create(
    store=store,
    category=category,
    name='–ì–∏–¥—Ä–æ–∫–æ—Å—Ç—é–º Cressi 5–º–º',
    slug='gidrokostyum-cressi-5mm',
    retail_price=Decimal('15000'),
    has_variants=True,  # ‚Üê –í–ê–ñ–ù–û!
    available=True,
)

# –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã
sizes_data = [
    ('S', 5),
    ('M', 10),
    ('L', 3),
    ('XL', 7),
]

for size_value, stock in sizes_data:
    size = Size.objects.get(type='clothing', value=size_value)
    ProductVariant.objects.create(
        product=product,
        size=size,
        stock=stock,
        is_active=True,
    )

print(f"‚úì –°–æ–∑–¥–∞–Ω —Ç–æ–≤–∞—Ä —Å {product.variants.count()} –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏")
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### 1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

```bash
curl http://localhost:8000/api/products/gidrokostyum-cressi-5mm/
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É (—Å —Ä–∞–∑–º–µ—Ä–æ–º)

```bash
curl -X POST http://localhost:8000/api/cart/add/ \
  -H "Content-Type: application/json" \
  -d '{
    "product_id": 1,
    "variant_id": 2,
    "quantity": 1
  }'
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

```bash
curl http://localhost:8000/api/cart/
```

---

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### ‚úÖ –¢–æ–≤–∞—Ä —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- `has_variants = True`
- Stock —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ProductVariant.stock`
- `Product.stock` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

### ‚úÖ –¢–æ–≤–∞—Ä –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
- `has_variants = False`
- Stock —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Product.stock`
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ

### ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞
- –¢–æ–≤–∞—Ä —Å —Ä–∞–∑–º–µ—Ä–æ–º: —É–∫–∞–∑—ã–≤–∞–µ–º `variant_id`
- –û–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä: `variant_id` –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–º–µ—Ä–æ–≤

–ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã `load_sizes` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:

### –û–¥–µ–∂–¥–∞ (9 —Ä–∞–∑–º–µ—Ä–æ–≤)
```
XXS, XS, S, M, L, XL, XXL, XXXL, XXXXL
```

### –û–±—É–≤—å (11 —Ä–∞–∑–º–µ—Ä–æ–≤)
```
36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46
```

### –î–∏–∞–ø–∞–∑–æ–Ω—ã (5 —Ä–∞–∑–º–µ—Ä–æ–≤)
```
36-37, 38-39, 40-41, 42-43, 44-45
```

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Ä–∞–∑–º–µ—Ä—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É: http://localhost:8000/admin/products/size/

---

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ö–∞–∫ –∑–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—É—é —Ü–µ–Ω—É –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞?**

A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `price_override` –≤ –≤–∞—Ä–∏–∞–Ω—Ç–µ:
```python
variant = ProductVariant.objects.get(id=2)
variant.price_override = Decimal('16000')  # –†–∞–∑–º–µ—Ä XL –¥–æ—Ä–æ–∂–µ
variant.save()
```

**Q: –ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤?**

A: –ù–µ—Ç! –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Ä–∞–∑–º–µ—Ä—ã. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç–∞?**

A: –î–∞! –°–æ–∑–¥–∞–π—Ç–µ –µ—â—ë –æ–¥–Ω—É –º–æ–¥–µ–ª—å `Color` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `ProductVariant`:
```python
color = models.ForeignKey(Color, ...)
```

**Q: –ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä?**

A: –í –∞–¥–º–∏–Ω–∫–µ —Å–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É "–ê–∫—Ç–∏–≤–µ–Ω" —É –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏–ª–∏ —Ä–∞–∑–º–µ—Ä–∞.
