# Vendaro CMS - –¢–æ—á–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –ù–û–í–´–• –ß–ê–¢–û–í (–í–ê–ñ–ù–û!)

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

**–ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏:**
- `apps/core/models.py` - BaseModel, TimeStampedModel, SoftDeleteModel, SlugModel

**Middleware:**
- `apps/core/middleware.py` - TenantMiddleware

**–ö–æ–º–∞–Ω–¥—ã:**
- `apps/stores/management/commands/load_demo_data.py` - –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ DeepReef
- `apps/products/management/commands/add_test_reviews.py` - —Ç–µ—Å—Ç–æ–≤—ã–µ –æ—Ç–∑—ã–≤—ã
- `apps/products/management/commands/load_sizes.py` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ß—Ç–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ
1. **Debug Toolbar** - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ urls.py (–≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫–∏)
2. **Celery/Redis** - –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, signals –¥–ª—è email –æ—Ç–∫–ª—é—á–µ–Ω—ã
3. **Email –æ—Ç–ø—Ä–∞–≤–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `console.EmailBackend` (–≤—ã–≤–æ–¥–∏—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª)

### –ß—Ç–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
1. –û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ (Stripe, –ÆKassa)
2. Wishlist (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
3. –ü—Ä–æ–º–æ–∫–æ–¥—ã
4. –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ —Ü–≤–µ—Ç—É (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä—ã)
5. –†–∞—Å—á—ë—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
6. –û—Ç–∑—ã–≤—ã —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone https://github.com/SubHunt/vendaro.git
cd vendaro/backend

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –ë–î (PostgreSQL)
createdb vendaro_db

# .env —Ñ–∞–π–ª
DATABASE_URL=postgresql://user:password@localhost:5432/vendaro_db
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# –ú–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
python manage.py createsuperuser

# –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
python manage.py load_demo_data
python manage.py add_test_reviews
python manage.py load_sizes  # –ù–û–í–û–ï: –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã
```

### 3. –ó–∞–ø—É—Å–∫

```bash
python manage.py runserver
```

**URLs:**
- Backend API: http://localhost:8000/api/
- Admin: http://localhost:8000/admin/
- API Docs: http://localhost:8000/api/docs/

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- Swagger UI: http://localhost:8000/api/docs/
- Postman
- VS Code REST Client
- curl

**–í–∞–∂–Ω–æ:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç (–æ–¥–∏–Ω session_key).

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### Frontend (Next.js 15) ‚Äî –ü–†–ò–û–†–ò–¢–ï–¢ 1

**–°—Ç–µ–∫:** Next.js 15 (App Router) + TypeScript + Tailwind CSS + shadcn/ui

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 - MVP:**
1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Next.js –ø—Ä–æ–µ–∫—Ç (App Router)
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API –∫–ª–∏–µ–Ω—Ç (axios/fetch)
3. üîÑ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
4. üîÑ –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ (—Å –≤—ã–±–æ—Ä–æ–º —Ä–∞–∑–º–µ—Ä–∞!)
5. üîÑ –ö–æ—Ä–∑–∏–Ω–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
6. üîÑ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
7. üîÑ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:**
8. –ö–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
9. –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
10. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–û –Ω–∞—Å, –ö–æ–Ω—Ç–∞–∫—Ç—ã)
11. –ë–ª–æ–≥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:**
12. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (–æ—Ç–¥–µ–ª—å–Ω–æ–µ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
13. –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
14. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Backend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –¢–µ—Å—Ç—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ (pytest)
2. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É)
3. –û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ (Stripe/–ÆKassa)
4. Wishlist API
5. –ü—Ä–æ–º–æ–∫–æ–¥—ã API
6. –¶–≤–µ—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç –∫ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py createsuperuser

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ DeepReef
python manage.py load_demo_data

# –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤—ã
python manage.py add_test_reviews

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã (25 —à—Ç)
python manage.py load_sizes

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python manage.py runserver

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
pytest -v
pytest --cov  # –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º

# Django shell
python manage.py shell

# –ü–æ–∫–∞–∑–∞—Ç—å URL-—ã (—Ç—Ä–µ–±—É–µ—Ç django-extensions)
python manage.py show_urls
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (—Ç–æ–≤–∞—Ä —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏)
```json
{
  "id": 1,
  "name": "–ì–∏–¥—Ä–æ–∫–æ—Å—Ç—é–º Cressi 5–º–º",
  "slug": "gidrokostyum-cressi-5mm",
  "retail_price": "15000.00",
  "has_variants": true,
  "variants": [
    {
      "id": 1,
      "size": {"value": "S", "type": "clothing"},
      "stock": 5,
      "price": 15000.00,
      "is_in_stock": true
    },
    {
      "id": 2,
      "size": {"value": "M", "type": "clothing"},
      "stock": 10,
      "price": 15000.00,
      "is_in_stock": true
    }
  ],
  "total_stock": 25,
  "available_sizes": ["S", "M", "L", "XL"]
}
```

### –ö–æ—Ä–∑–∏–Ω–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
```json
{
  "id": 1,
  "items": [
    {
      "id": 5,
      "product": {
        "id": 1,
        "name": "–ì–∏–¥—Ä–æ–∫–æ—Å—Ç—é–º Cressi 5–º–º",
        "has_variants": true
      },
      "variant": {
        "id": 2,
        "size_value": "M",
        "size_type": "clothing",
        "stock": 10
      },
      "quantity": 1,
      "price": 15000.00,
      "subtotal": 15000.00,
      "is_available": true
    }
  ],
  "items_count": 1,
  "total_price": 15000.00
}
```

### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```json
{
  "variant_id": ["–î–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–º–µ—Ä"],
  "quantity": ["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ. –î–æ—Å—Ç—É–ø–Ω–æ: 5"]
}
```

### JWT —Ç–æ–∫–µ–Ω—ã
```json
{
  "user": {
    "id": 1,
    "email": "user@example.com",
    "first_name": "–ò–≤–∞–Ω"
  },
  "tokens": {
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "access": "eyJ0eXAiOiJKV1QiLCJhbGc..."
  }
}
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Å—Å—ã–ª–∫–∏

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/SubHunt/vendaro  
**–î–æ–º–µ–Ω—ã:**
- vendaro.ru - –±—É–¥—É—â–∏–π –ª–µ–Ω–¥–∏–Ω–≥ CMS
- deepreef.ru - –ø–µ—Ä–≤—ã–π –º–∞–≥–∞–∑–∏–Ω (showcase)

**–î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã:**
- **–í–ª–∞–¥–µ–ª–µ—Ü:** owner@deepreef.ru / password123
- **–û–ø—Ç–æ–≤–∏–∫:** wholesale@company.com / password123

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- Backend: Django 5.2, Django REST Framework, PostgreSQL, JWT
- Frontend: Next.js 15 (App Router), TypeScript, Tailwind CSS, shadcn/ui (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

---

## Changelog

**10.10.2025:**
- ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ (Size, ProductVariant)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤: –æ–¥–µ–∂–¥–∞ (XXS-XXXXL), –æ–±—É–≤—å (36-46), –¥–∏–∞–ø–∞–∑–æ–Ω—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ—Ä–∑–∏–Ω–∞: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- ‚úÖ API: –¥–æ–±–∞–≤–ª–µ–Ω—ã endpoints –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ load_sizes –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ API
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

**07.10.2025:**
- ‚úÖ –¢–µ—Å—Ç—ã (pytest) - 15 —Ç–µ—Å—Ç–æ–≤, 72% –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ Permissions - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã - –ø–æ —Ü–µ–Ω–µ, —Ä–µ–π—Ç–∏–Ω–≥—É, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - drf-spectacular –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

**05.10.2025:**
- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Multi-tenant middleware —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Signals –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ Admin –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚è∏Ô∏è Celery/Redis –æ—Ç–∫–ª—é—á–µ–Ω—ã (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** Frontend –Ω–∞ Next.js 15 (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

**Backend:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–π: 8 (accounts, cart, cms, core, orders, payments, products, stores)
- –ú–æ–¥–µ–ª–µ–π: 20+ (–≤–∫–ª—é—á–∞—è Size, ProductVariant)
- API Endpoints: 30+
- –¢–µ—Å—Ç—ã: 15 (–ø–æ–∫—Ä—ã—Ç–∏–µ ~72%)
- –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~5000+ (–±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤)

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü: 20+
- –î–µ–º–æ —Ç–æ–≤–∞—Ä–æ–≤: 5 (DeepReef)
- –†–∞–∑–º–µ—Ä–æ–≤: 25 (–æ–¥–µ–∂–¥–∞ + –æ–±—É–≤—å + –¥–∏–∞–ø–∞–∑–æ–Ω—ã)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–π: 6

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:**
- Backend API: ‚úÖ 100%
- –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤: ‚úÖ 100%
- –¢–µ—Å—Ç—ã: ‚úÖ 72%
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: ‚úÖ 90%
- Frontend: üîÑ 0% (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø)

---

## üéØ –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏

### –í —Ä–∞–±–æ—Ç–µ
- Frontend –Ω–∞ Next.js 15
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)

### –í –ø–ª–∞–Ω–∞—Ö
- –¢–µ—Å—Ç—ã –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
- –¶–≤–µ—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞—Ç—Ä–∏–±—É—Ç)
- Wishlist API
- –ü—Ä–æ–º–æ–∫–æ–¥—ã
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (production)

### –û—Ç–ª–æ–∂–µ–Ω–æ
- –û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞ (Stripe/–ÆKassa)
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Next.js)
- SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –†–∞–±–æ—Ç–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–æ–≤–∞—Ä—ã —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ (–æ–¥–µ–∂–¥–∞, –æ–±—É–≤—å)
- –¢–æ–≤–∞—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (—Ü–≤–µ—Ç –≤ –±—É–¥—É—â–µ–º)
- –†–∞–∑–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–æ—Å—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ –≤–∞—Ä–∏–∞—Ü–∏–π
- –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã

### Multi-tenant best practices

```python
# ‚úÖ –í–°–ï–ì–î–ê —Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ store
Product.objects.filter(store=request.store)

# ‚úÖ BaseModel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç store
class Product(BaseModel):  # store —É–∂–µ –µ—Å—Ç—å
    pass

# ‚ùå –ù–ï –¥–µ–ª–∞–π—Ç–µ –∂—ë—Å—Ç–∫–∏—Ö –ø—Ä–∏–≤—è–∑–æ–∫
CATEGORIES = ['Diving', 'Masks']  # –ü–ª–æ—Ö–æ!

# ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –ë–î
Category.objects.filter(store=request.store)
```

### API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å —Ä–∞–∑–º–µ—Ä–æ–º –≤ –∫–æ—Ä–∑–∏–Ω—É
await api.post('/cart/add/', {
  product_id: 1,
  variant_id: 2,  // –†–∞–∑–º–µ—Ä M
  quantity: 1
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
const product = await api.get('/products/gidrokostyum-cressi-5mm/');
// product.variants - –º–∞—Å—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**Backend (requirements.txt):**
- Django==5.2
- djangorestframework==3.14+
- djangorestframework-simplejwt==5.3+
- psycopg2-binary (PostgreSQL)
- django-cors-headers
- django-filter
- drf-spectacular (Swagger)
- transliterate
- pytest, pytest-django, pytest-cov (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- factory-boy, faker (—Ñ–∏–∫—Å—Ç—É—Ä—ã)

**Frontend (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è):**
- Next.js 15 (App Router)
- React 19
- TypeScript 5+
- Tailwind CSS 3+
- shadcn/ui
- Zustand (state management)
- TanStack Query (API)
- Axios

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- Django: https://docs.djangoproject.com/
- DRF: https://www.django-rest-framework.org/
- Next.js 15: https://nextjs.org/docs
- shadcn/ui: https://ui.shadcn.com/

**–ü—Ä–æ–µ–∫—Ç:**
- GitHub: https://github.com/SubHunt/vendaro
- API Docs: http://localhost:8000/api/docs/
- Admin: http://localhost:8000/admin/

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ —á–∞—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã:
- ‚úÖ –≠—Ç–æ—Ç —Ñ–∞–π–ª PROJECT_STATE.md
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å/–ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏/—Ñ–∏—á–∏

–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞:
- üîî –£–≤–µ–¥–æ–º–∏—Ç—å –ø—Ä–∏ –æ—Å—Ç–∞—Ç–∫–µ ~10,000 —Ç–æ–∫–µ–Ω–æ–≤
- üìù –ü–æ—Å–ª–µ —Ñ–∏—á–∏ –Ω–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ PROJECT_STATE.md
- üí¨ –†–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
- ‚úÖ –ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- üìÇ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ: —Ñ–∞–π–ª—ã –≤ —á–∞—Ç (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 10.10.2025  
**–í–µ—Ä—Å–∏—è:** 1.2  
**–°—Ç–∞—Ç—É—Å:** Backend –≥–æ—Ç–æ–≤, –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º Frontend –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º

1. **üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–∫–µ–Ω–∞—Ö:**
   - –°–æ–æ–±—â–∞—Ç—å –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è ~10,000 —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å —á–∞—Ç

2. **üìù –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Ñ–∏—á–∏:**
   - –ù–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ PROJECT_STATE.md
   - –§–æ—Ä–º–∞—Ç: –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ + —Ñ–∞–π–ª—ã + –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

3. **üìÇ –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏:**
   - **–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ:** —Å–∫–∏–¥—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø—Ä—è–º–æ –≤ —á–∞—Ç (—ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–∫–µ–Ω—ã –≤ 2-3 —Ä–∞–∑–∞ vs web_fetch)
   - web_fetch –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

4. **üí¨ –°—Ç–∏–ª—å –∫–æ–¥–∞ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:**
   - **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** ‚Äî –∫–∞–∫ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
   - –û–±—ä—è—Å–Ω—è—Ç—å –ß–¢–û –¥–µ–ª–∞–µ—Ç –∫–æ–¥, –ó–ê–ß–ï–ú –∏ –ö–ê–ö —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Docstrings –Ω–∞ **—Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

5. **‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã (pytest) **—Å—Ä–∞–∑—É** –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏—á–∏
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–µ
   - –§–æ—Ä–º–∞—Ç: `apps/{app}/tests/test_{feature}.py`

---

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/SubHunt/vendaro  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 05.10.2025  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 10.10.2025  
**–°—Ç–∞—Ç—É—Å:** Backend API –≥–æ—Ç–æ–≤, –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

---

## üéØ –°–¢–†–ê–¢–ï–ì–ò–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò: "DeepReef-first, Vendaro-ready"

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**Vendaro** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è multi-tenant CMS –¥–ª—è e-commerce  
**DeepReef** ‚Äî –ø–µ—Ä–≤—ã–π –º–∞–≥–∞–∑–∏–Ω (tenant) –Ω–∞ Vendaro, showcase –ø—Ä–æ–µ–∫—Ç–∞

### –ü–æ–¥—Ö–æ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. ‚úÖ **–ü–∏—à–µ–º –∫–æ–¥ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ** (multi-tenant —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è)
2. ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ DeepReef** (—Ä–µ–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω —Å–Ω–∞—Ä—è–∂–µ–Ω–∏—è –¥–ª—è –¥–∞–π–≤–∏–Ω–≥–∞)
3. ‚úÖ **DeepReef = –ø–µ—Ä–≤—ã–π tenant**, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
4. ‚úÖ **–û–¥–∏–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** vendaro (–Ω–µ deepreef!)

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# ‚ùå –ü–õ–û–•–û (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ DeepReef)
class Product(models.Model):
    category = models.CharField(choices=DIVING_CATEGORIES)  # –ñ—ë—Å—Ç–∫–æ!

# ‚úÖ –•–û–†–û–®–û (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ)
class Product(BaseModel):  # BaseModel —Å–æ–¥–µ—Ä–∂–∏—Ç store
    category = models.ForeignKey(Category)  # –ì–∏–±–∫–æ!
```

```python
# ‚ùå –ü–õ–û–•–û - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –∫–æ–¥–µ
CATEGORIES = ['Masks', 'Fins', 'Wetsuits']

# ‚úÖ –•–û–†–û–®–û - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ë–î
Category.objects.filter(store=deepreef)
```

### –≠—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è

**–≠—Ç–∞–ø 1 (—Ç–µ–∫—É—â–∏–π): –§—É–Ω–¥–∞–º–µ–Ω—Ç Vendaro + DeepReef (2-3 –Ω–µ–¥–µ–ª–∏)**
- ‚úÖ Backend API (Django + DRF) ‚Äî –≥–æ—Ç–æ–≤–æ
- ‚úÖ Multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî –≥–æ—Ç–æ–≤–æ
- ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ (—Ä–∞–∑–º–µ—Ä—ã) ‚Äî –≥–æ—Ç–æ–≤–æ
- üîÑ Frontend (Next.js 15 + Tailwind + shadcn/ui) ‚Äî –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- üîÑ –¢–µ–º–∞ DeepReef (—Ü–≤–µ—Ç–∞, –ª–æ–≥–æ—Ç–∏–ø, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)

**–≠—Ç–∞–ø 2: –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç DeepReef (1-2 –º–µ—Å—è—Ü–∞)**
- –ó–∞–ø—É—Å–∫ deepreef.ru –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ!)

**–≠—Ç–∞–ø 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è (1 –Ω–µ–¥–µ–ª—è)**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –º–∞–≥–∞–∑–∏–Ω"
- –í—Ç–æ—Ä–æ–π –º–∞–≥–∞–∑–∏–Ω-–ø—Ä–∏–º–µ—Ä
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–æ–≤

**–≠—Ç–∞–ø 4: –û—Ç–∫—Ä—ã—Ç–∏–µ Vendaro (1-2 –Ω–µ–¥–µ–ª–∏)**
- –õ–µ–Ω–¥–∏–Ω–≥ vendaro.ru
- –í–∏–¥–µ–æ-—Ç—É—Ç–æ—Ä–∏–∞–ª—ã
- DeepReef –∫–∞–∫ showcase

---

## –ß—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
vendaro/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accounts/      # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, JWT auth
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart/          # –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cms/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –±–ª–æ–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/          # –ë–∞–∑–æ–≤—ã–µ –º–æ–¥–µ–ª–∏, middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders/        # –ó–∞–∫–∞–∑—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/      # –ü–ª–∞—Ç–µ–∂–∏ (–±–µ–∑ –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/      # –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ + –í–ê–†–ò–ê–ù–¢–´
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stores/        # Multi-tenant –º–∞–≥–∞–∑–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ development.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îÇ   ‚îî‚îÄ‚îÄ manage.py
‚îÇ
‚îú‚îÄ‚îÄ frontend/              # Next.js 15 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/          # App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ themes/       # –¢–µ–º—ã –º–∞–≥–∞–∑–∏–Ω–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ default/  # –ë–∞–∑–æ–≤–∞—è —Ç–µ–º–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ deepreef/ # –¢–µ–º–∞ DeepReef
‚îÇ   ‚îî‚îÄ‚îÄ public/
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ SETUP.md          # –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ API.md            # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ DEPLOYMENT.md     # –î–µ–ø–ª–æ–π
‚îÇ
‚îî‚îÄ‚îÄ examples/
    ‚îî‚îÄ‚îÄ deepreef/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DeepReef
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ú–∏–≥—Ä–∞—Ü–∏–∏** —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ** –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–º–∞–≥–∞–∑–∏–Ω DeepReef —Å —Ç–æ–≤–∞—Ä–∞–º–∏)

### 3. –ú–æ–¥–µ–ª–∏ (–≤—Å–µ —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç)

#### accounts
- `User` - –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å (email –≤–º–µ—Å—Ç–æ username, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ B2B)
- `UserAddress` - –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

#### stores
- `Store` - –º–∞–≥–∞–∑–∏–Ω—ã (multi-tenant)
- `StoreSettings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
- `StoreSocialMedia` - —Å–æ—Ü—Å–µ—Ç–∏ –º–∞–≥–∞–∑–∏–Ω–∞

#### products
- `Category` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é
- `Product` - —Ç–æ–≤–∞—Ä—ã (B2C/B2B —Ü–µ–Ω—ã, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- `Size` - **–ù–û–í–û–ï:** —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–∑–º–µ—Ä–æ–≤ (–æ–¥–µ–∂–¥–∞, –æ–±—É–≤—å, –¥–∏–∞–ø–∞–∑–æ–Ω—ã)
- `ProductVariant` - **–ù–û–í–û–ï:** –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞ (—Ä–∞–∑–º–µ—Ä—ã + stock + —Ü–µ–Ω—ã)
- `ProductImage` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `ProductReview` - –æ—Ç–∑—ã–≤—ã

#### cart
- `Cart` - –∫–æ—Ä–∑–∏–Ω–∞ (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–æ–Ω–∏–º–æ–≤)
- `CartItem` - —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ (**–æ–±–Ω–æ–≤–ª–µ–Ω–æ:** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)

#### orders
- `Order` - –∑–∞–∫–∞–∑—ã
- `OrderItem` - —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ

#### payments
- `Payment` - –ø–ª–∞—Ç–µ–∂–∏ (–ø—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç—ã)

#### cms
- `Page` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `BlogPost` - –±–ª–æ–≥
- `Menu` / `MenuItem` - –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 4. API Endpoints (–≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç)

**–ö–æ—Ä–Ω–µ–≤–æ–π endpoint:** `http://localhost:8000/api/`

#### Products API
- `GET /api/products/` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/products/{slug}/` - –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞ (**–æ–±–Ω–æ–≤–ª–µ–Ω–æ:** –≤–∫–ª—é—á–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã)
- `GET /api/products/{slug}/reviews/` - –æ—Ç–∑—ã–≤—ã —Ç–æ–≤–∞—Ä–∞
- `POST /api/products/{slug}/add_review/` - –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
- `GET /api/products/categories/` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GET /api/products/categories/tree/` - –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–§–∏–ª—å—Ç—Ä—ã:**
- `?category=slug` - –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `?min_price=1000&max_price=10000` - –ø–æ —Ü–µ–Ω–µ
- `?search=–º–∞—Å–∫–∞` - –ø–æ–∏—Å–∫
- `?ordering=-created` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

#### Cart API (**–æ–±–Ω–æ–≤–ª–µ–Ω–æ**)
- `GET /api/cart/` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É (–≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö)
- `POST /api/cart/add/` - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä (**–Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä:** `variant_id`)
- `PATCH /api/cart/items/{id}/` - –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `DELETE /api/cart/items/{id}/` - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
- `POST /api/cart/clear/` - –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

#### Orders API
- `GET /api/orders/` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç—Ä–µ–±—É–µ—Ç auth)
- `GET /api/orders/{order_number}/` - –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ (—Ç—Ä–µ–±—É–µ—Ç auth)
- `POST /api/orders/create_order/` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã

#### Auth API
- `POST /api/auth/register/` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login/` - –≤—Ö–æ–¥ (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT)
- `POST /api/auth/token/refresh/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT
- `GET /api/auth/profile/` - –ø—Ä–æ—Ñ–∏–ª—å (—Ç—Ä–µ–±—É–µ—Ç auth)
- `PUT /api/auth/profile/update/` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (—Ç—Ä–µ–±—É–µ—Ç auth)
- `POST /api/auth/change-password/` - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (—Ç—Ä–µ–±—É–µ—Ç auth)

#### Payments API
- `GET /api/payments/` - —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π
- `GET /api/payments/{id}/` - –¥–µ—Ç–∞–ª–∏ –ø–ª–∞—Ç–µ–∂–∞
- `POST /api/payments/create_payment/` - —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂

#### CMS API
- `GET /api/cms/pages/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `GET /api/cms/pages/{slug}/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ slug
- `GET /api/cms/blog/` - –±–ª–æ–≥ (—Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤)
- `GET /api/cms/blog/{slug}/` - –ø–æ—Å—Ç –ø–æ slug
- `GET /api/cms/menus/` - –º–µ–Ω—é
- `GET /api/cms/menus/{location}/` - –º–µ–Ω—é –ø–æ location

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### Multi-tenant middleware
- `apps.core.middleware.TenantMiddleware` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–≥–∞–∑–∏–Ω –ø–æ –¥–æ–º–µ–Ω—É
- –†–∞–±–æ—Ç–∞–µ—Ç: `localhost` ‚Üí –º–∞–≥–∞–∑–∏–Ω DeepReef
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è: `/admin/`, `/api/docs/`, `/__debug__/`

#### Django Admin
- –í—Å–µ –º–æ–¥–µ–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- –ò–Ω–ª–∞–π–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (—Ç–æ–≤–∞—Ä—ã —Å —Ñ–æ—Ç–æ, –∑–∞–∫–∞–∑—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏, **–≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤**)
- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞—é—Ç

#### JWT Authentication
- `rest_framework_simplejwt` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- Access token: 60 –º–∏–Ω—É—Ç
- Refresh token: 7 –¥–Ω–µ–π
- Rotation –≤–∫–ª—é—á–µ–Ω

#### CORS
- –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è `http://localhost:3000` (Next.js)
- Credentials —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

### 6. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (Signals)

#### products/signals.py
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `rating` –∏ `reviews_count`

#### orders/signals.py
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `sales_count` —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞–∫–∞–∑–∞
- **–û–¢–ö–õ–Æ–ß–Å–ù** (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ apps.py –∏–∑-–∑–∞ Redis/Celery)

### 7. –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ

–ö–æ–º–∞–Ω–¥–∞: `python manage.py load_demo_data`

**–°–æ–∑–¥–∞—ë—Ç:**
- –ú–∞–≥–∞–∑–∏–Ω DeepReef (deepreef.local ‚Üí –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ localhost)
- 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–î–∞–π–≤–∏–Ω–≥, –ú–∞—Å–∫–∏, –õ–∞—Å—Ç—ã –∏ —Ç.–¥.)
- 5 —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ü–µ–Ω–∞–º–∏ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- –í–ª–∞–¥–µ–ª—å—Ü–∞: `owner@deepreef.ru` / `password123`
- –û–ø—Ç–æ–≤–∏–∫–∞: `wholesale@company.com` / `password123`

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤: `python manage.py add_test_reviews`

**–ù–û–í–û–ï:** –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤: `python manage.py load_sizes`

### 8. –¢–µ—Å—Ç—ã (pytest)

**–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:** pytest, pytest-django, pytest-cov, factory-boy, faker

**–§–∞–π–ª—ã:**
- `backend/conftest.py` - –æ–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã (store, user, product, api_client)
- `backend/pytest.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `apps/products/tests/test_models.py` - —Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
- `apps/products/tests/test_api.py` - —Ç–µ—Å—Ç—ã API

**–ó–∞–ø—É—Å–∫:** `pytest -v` –∏–ª–∏ `pytest --cov` (—Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:** 15 —Ç–µ—Å—Ç–æ–≤, –ø–æ–∫—Ä—ã—Ç–∏–µ ~72% –∫–æ–¥–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Debug Toolbar –æ—Ç–∫–ª—é—á—ë–Ω –≤ development.py –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### 9. Permissions (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)

**–§–∞–π–ª:** `apps/core/permissions.py`

**–ö–ª–∞—Å—Å—ã:**
- `IsOwnerOrReadOnly` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –æ–±—ä–µ–∫—Ç–∞
- `IsStoreOwnerOrReadOnly` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –º–∞–≥–∞–∑–∏–Ω–∞  
- `IsStaffOrOwner` - –¥–æ—Å—Ç—É–ø staff –∏–ª–∏ –≤–ª–∞–¥–µ–ª—å—Ü—É
- `ReadOnly` - —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** `permission_classes = [IsOwnerOrReadOnly]` –≤ ViewSet

### 10. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è Products API

**–§–∞–π–ª:** `apps/products/filters.py`  
**–ö–ª–∞—Å—Å:** `ProductFilter` (django-filters)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- `?min_price=1000&max_price=5000` - –ø–æ —Ü–µ–Ω–µ
- `?in_stock=true` - —Ç–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏
- `?min_rating=4` - –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–æ—Ç 1 –¥–æ 5)
- `?category=1` - –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `?category_tree=1` - –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–∫–ª—é—á–∞—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `?search=–º–∞—Å–∫–∞` - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- `?ordering=-created` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (created, price, rating, sales_count)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** `filterset_class = ProductFilter` –≤ ProductViewSet

### 11. API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** drf-spectacular

**URL:** 
- http://localhost:8000/api/docs/ - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- http://localhost:8000/api/schema/ - OpenAPI —Å—Ö–µ–º–∞ (JSON)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ base.py:**
```python
SPECTACULAR_SETTINGS = {
    'TITLE': 'Vendaro CMS API',
    'DESCRIPTION': 'Multi-tenant E-commerce Platform API',
    'VERSION': '1.0.0',
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ serializers –∏ views
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –≠–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º—ã

### 12. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### Slug —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ –ª–∞—Ç–∏–Ω–∏—Ü—É
- "–ú–∞—Å–∫–∞ Cressi" ‚Üí "maska-cressi"
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `transliterate`

#### Stock management
- –ê–≤—Ç–æ—É–º–µ–Ω—å—à–µ–Ω–∏–µ stock –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ (–≤ serializer)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
- **–ù–û–í–û–ï:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ stock –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤

#### B2B/B2C —Ü–µ–Ω—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `is_wholesale=True` –≤–∏–¥–∏—Ç –æ–ø—Ç–æ–≤—ã–µ —Ü–µ–Ω—ã
- –ï—Å–ª–∏ —É —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç `wholesale_price`, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞
- –ú–µ—Ç–æ–¥ `Product.get_price_for_user(user)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ü–µ–Ω—É
- **–ù–û–í–û–ï:** –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–Ω

#### –ö–æ—Ä–∑–∏–Ω–∞ –¥–ª—è –∞–Ω–æ–Ω–∏–º–æ–≤
- –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –∫–æ—Ä–∑–∏–Ω—É —á–µ—Ä–µ–∑ session_key
- –ü—Ä–∏ –≤—Ö–æ–¥–µ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—ã (–º–µ—Ç–æ–¥ `Cart.merge_with()`)
- **–ù–û–í–û–ï:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ

---

## ‚úÖ –í–ê–†–ò–ê–ù–¢–´ –¢–û–í–ê–†–û–í (Product Variants) ‚Äî 10.10.2025

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

#### 1. –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ (products/models.py)

**Size** ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–∑–º–µ—Ä–æ–≤
- –¢–∏–ø—ã —Ä–∞–∑–º–µ—Ä–æ–≤:
  - `clothing`: XXS, XS, S, M, L, XL, XXL, XXXL, XXXXL (9 —Ä–∞–∑–º–µ—Ä–æ–≤)
  - `footwear`: 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46 (11 —Ä–∞–∑–º–µ—Ä–æ–≤)
  - `range`: 36-37, 38-39, 40-41, 42-43, 44-45 (5 –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤)
- –ü–æ–ª—è: `type`, `value`, `order`, `is_active`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π: `python manage.py load_sizes` (25 —Ä–∞–∑–º–µ—Ä–æ–≤)

**ProductVariant** ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞ (—Ç–æ—Ä–≥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- –°–≤—è–∑—å: Product + Size = —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- –°–≤–æ–π `stock` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ `price_override` –∏ `wholesale_price_override`
- SKU –∏ barcode –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞
- –°—á—ë—Ç—á–∏–∫ `sales_count`
- –ú–µ—Ç–æ–¥—ã: `get_retail_price()`, `get_wholesale_price()`, `get_price_for_user()`, `is_in_stock()`

**Product.has_variants** ‚Äî –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- `True` = —Ç–æ–≤–∞—Ä –∏–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã (—Ä–∞–∑–º–µ—Ä—ã)
- `False` = –æ–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã: `get_total_stock()`, `get_available_sizes()`

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ—Ä–∑–∏–Ω–∞ (cart/models.py)

**CartItem.variant** ‚Äî –Ω–æ–≤–æ–µ –ø–æ–ª–µ
- FK –Ω–∞ ProductVariant (nullable)
- `NULL` = –æ–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- –£–∫–∞–∑–∞–Ω–æ = —Ç–æ–≤–∞—Ä —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** `(cart, product, variant)`
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ç–æ–≤–∞—Ä —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ = —Ä–∞–∑–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ

**–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `get_available_stock()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç stock —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `is_available()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞/–≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞

#### 3. API –∏–∑–º–µ–Ω–µ–Ω–∏—è

**GET /api/products/{slug}/** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ:
```json
{
  "has_variants": true,
  "variants": [
    {
      "id": 1,
      "size": {"value": "M", "type": "clothing"},
      "stock": 10,
      "price": 15000.00,
      "wholesale_price": 12500.00,
      "is_in_stock": true
    }
  ],
  "total_stock": 25,
  "variants_count": 4,
  "available_sizes": ["S", "M", "L", "XL"]
}
```

**POST /api/cart/add/** ‚Äî –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä:
```json
{
  "product_id": 1,
  "variant_id": 2,  // –ù–û–í–û–ï: ID –≤–∞—Ä–∏–∞–Ω—Ç–∞ (—Ä–∞–∑–º–µ—Ä–∞), –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "quantity": 1
}
```

**GET /api/cart/** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ:
```json
{
  "items": [
    {
      "product": {...},
      "variant": {  // –ù–û–í–û–ï
        "id": 2,
        "size_value": "M",
        "size_type": "clothing",
        "stock": 10,
        "sku": "WETSUIT-5MM-M"
      },
      "available_stock": 10,
      "is_available": true
    }
  ]
}
```

#### 4. –ê–¥–º–∏–Ω–∫–∞ (products/admin.py)

**Size Admin** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Ç–∏–ø—É
- –ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

**ProductVariant Inline** ‚Äî –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä—è–º–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
- Autocomplete –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–º–µ—Ä–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ stock, —Ü–µ–Ω, SKU
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ —Å–ø–∏—Å–∫–µ —Ç–æ–≤–∞—Ä–æ–≤

**ProductVariant Admin** ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–æ–≤–∞—Ä—É, —Ä–∞–∑–º–µ—Ä—É, –Ω–∞–ª–∏—á–∏—é
- –ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —Å–±—Ä–æ—Å–∏—Ç—å —Ü–µ–Ω—ã

**Product Admin** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- –ù–æ–≤–æ–µ –ø–æ–ª–µ: "–ò–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã" —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –ò–Ω–ª–∞–π–Ω –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ‚úì 4 —à—Ç. (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- Stock display: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π stock –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏

#### 5. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã (–æ–±–Ω–æ–≤–ª–µ–Ω—ã)

**products/serializers.py:**
- `SizeSerializer` - —Ä–∞–∑–º–µ—Ä—ã
- `ProductVariantSerializer` - –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è API
- `ProductVariantDetailSerializer` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—Ä–∏–∞–Ω—Ç–µ
- `ProductListSerializer` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `ProductDetailSerializer` - –≤–∫–ª—é—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**cart/serializers.py:**
- `CartItemVariantSerializer` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—Ä–∏–∞–Ω—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ
- `CartItemSerializer` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `variant_id`
- `AddToCartSerializer` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `UpdateCartItemSerializer` - –ø—Ä–æ–≤–µ—Ä–∫–∞ stock –≤–∞—Ä–∏–∞–Ω—Ç–∞

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–æ–≤–∞—Ä —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ç—Ä–µ–±—É–µ—Ç `variant_id`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–æ–≤–∞—Ä –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `variant_id`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–≤–∞—Ä—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–∞–ª–∏—á–∏–µ –Ω–∞ —Å–∫–ª–∞–¥–µ (—Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞)

#### 6. –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –≤ –ë–î (25 —Ä–∞–∑–º–µ—Ä–æ–≤: –æ–¥–µ–∂–¥–∞, –æ–±—É–≤—å, –¥–∏–∞–ø–∞–∑–æ–Ω—ã)
python manage.py load_sizes

# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py makemigrations products cart

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ (–ê–¥–º–∏–Ω–∫–∞)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∞–¥–º–∏–Ω–∫–µ: http://localhost:8000/admin/products/product/add/
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ü–µ–Ω–∞)
3. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É **‚úÖ "–ò–º–µ–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã"**
4. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ "–í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤"
5. –î–æ–±–∞–≤—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã (–Ω–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë"):
   ```
   –†–∞–∑–º–µ—Ä: S    | Stock: 5  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: M    | Stock: 10 | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: L    | Stock: 3  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   –†–∞–∑–º–µ—Ä: XL   | Stock: 7  | –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   ```
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–≤–∞—Ä

#### API –ø—Ä–∏–º–µ—Ä—ã

**–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä —Å —Ä–∞–∑–º–µ—Ä–æ–º –≤ –∫–æ—Ä–∑–∏–Ω—É:**
```bash
POST /api/cart/add/
{
  "product_id": 1,
  "variant_id": 2,
  "quantity": 1
}
```

**–î–æ–±–∞–≤–∏—Ç—å –æ–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä (–±–µ–∑ —Ä–∞–∑–º–µ—Ä–∞):**
```bash
POST /api/cart/add/
{
  "product_id": 5,
  "quantity": 1
}
```

**–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏:**
```bash
GET /api/products/gidrokostyum-cressi-5mm/
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—à–∏–±–∫–∏

**–¢–æ–≤–∞—Ä —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑–º–µ—Ä:**
```json
{
  "variant_id": ["–î–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–º–µ—Ä"]
}
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞ —Å–∫–ª–∞–¥–µ:**
```json
{
  "quantity": ["–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ. –î–æ—Å—Ç—É–ø–Ω–æ: 10"]
}
```

**–í–∞—Ä–∏–∞–Ω—Ç –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–≤–∞—Ä—É:**
```json
{
  "variant_id": ["–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É"]
}
```

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **–°—Ç–∞—Ä—ã–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ:
- `has_variants = False`
- `variant = NULL` –≤ –∫–æ—Ä–∑–∏–Ω–µ
- Stock —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Product.stock`

‚úÖ **–ö–æ—Ä–∑–∏–Ω–∞** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ç–∏–ø–∞:
- –û–±—ã—á–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã: `variant = NULL`
- –¢–æ–≤–∞—Ä—ã —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏: `variant = ProductVariant`

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã/–¥–æ–±–∞–≤–ª–µ–Ω—ã

**–ú–æ–¥–µ–ª–∏:**
- ‚úÖ `apps/products/models.py` - Size, ProductVariant, –æ–±–Ω–æ–≤–ª—ë–Ω Product
- ‚úÖ `apps/cart/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ variant –≤ CartItem

**–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:**
- ‚úÖ `apps/products/serializers.py` - API –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- ‚úÖ `apps/cart/serializers.py` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**–ê–¥–º–∏–Ω–∫–∞:**
- ‚úÖ `apps/products/admin.py` - Size, ProductVariant, –æ–±–Ω–æ–≤–ª—ë–Ω ProductAdmin

**–ö–æ–º–∞–Ω–¥—ã:**
- ‚úÖ `apps/products/management/commands/load_sizes.py` - –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ `apps/products/migrations/000X_add_variants.py` - Size, ProductVariant
- ‚úÖ `apps/cart/migrations/000X_add_variant.py` - CartItem.variant

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```
products_size (–Ω–æ–≤–∞—è)
‚îú‚îÄ‚îÄ id
‚îú‚îÄ‚îÄ type (clothing/footwear/range)
‚îú‚îÄ‚îÄ value (M, 42, 40-41)
‚îú‚îÄ‚îÄ order
‚îî‚îÄ‚îÄ is_active

products_productvariant (–Ω–æ–≤–∞—è)
‚îú‚îÄ‚îÄ id
‚îú‚îÄ‚îÄ product_id ‚Üí Product
‚îú‚îÄ‚îÄ size_id ‚Üí Size
‚îú‚îÄ‚îÄ stock
‚îú‚îÄ‚îÄ price_override (nullable)
‚îú‚îÄ‚îÄ wholesale_price_override (nullable)
‚îú‚îÄ‚îÄ sku
‚îú‚îÄ‚îÄ barcode
‚îú‚îÄ‚îÄ is_active
‚îú‚îÄ‚îÄ sales_count
‚îú‚îÄ‚îÄ created
‚îî‚îÄ‚îÄ updated

cart_cartitem (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
‚îú‚îÄ‚îÄ id
‚îú‚îÄ‚îÄ cart_id
‚îú‚îÄ‚îÄ product_id
‚îú‚îÄ‚îÄ variant_id ‚Üí ProductVariant (nullable, –ù–û–í–û–ï)
‚îú‚îÄ‚îÄ quantity
‚îú‚îÄ‚îÄ price
‚îú‚îÄ‚îÄ is_wholesale
‚îú‚îÄ‚îÄ created
‚îî‚îÄ‚îÄ updated
```

---

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### settings/base.py

```python
LANGUAGE_CODE = 'ru'
TIME_ZONE = 'UTC'
AUTH_USER_MODEL = 'accounts.User'

INSTALLED_APPS = [
    'django.contrib.contenttypes',
    'django.contrib.auth',
    'apps.accounts',  # –î–æ admin!
    'django.contrib.admin',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'rest_framework_simplejwt',
    'corsheaders',
    'django_filters',
    'drf_spectacular',
    'apps.core',
    'apps.stores',
    'apps.products',
    'apps.cart',
    'apps.orders',
    'apps.payments',
    'apps.cms',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'apps.core.middleware.TenantMiddleware',  # Multi-tenant
]
```

### urls.py —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```python
# config/urls.py
urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('apps.core.urls')),
]

# apps/core/urls.py (–≥–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä)
urlpatterns = [
    path('', api_root, name='api-root'),
    path('products/', include('apps.products.urls')),
    path('cart/', include('apps.cart.urls')),
    path('orders/', include('apps.orders.urls')),
    path('auth/', include('apps.accounts.urls')),
    path('payments/', include('apps.payments.urls')),
    path('cms/', include('apps.cms.urls')),
]
```

###